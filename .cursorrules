# Cursor Rules for auto-tensaku-system

## 必須参照ファイル

**重要**: このプロジェクトでは、作業を開始する前に必ず以下のファイルを参照してください：

1. **`web/AGENT.md`** - プロジェクトの基本方針、デプロイ関連の問題と解消法、トラブルシューティングガイド
   - このファイルには、プロジェクトの構造、デプロイ時の注意事項、よくある問題とその解決方法が記載されています
   - デプロイ関連の問題が発生した場合は、まずこのファイルを確認してください

## プロジェクト構造

- **メインアプリケーション**: `web/` ディレクトリ内のNext.jsアプリケーション
- **プロジェクトルート**: リポジトリのルートディレクトリ
- **設定ファイル**: `web/` ディレクトリ内に配置

## 作業時の注意事項

1. **既存のTypeScript/Next.js構成を尊重**: 破壊的変更を避けること
2. **日本語での返答**: すべての返答は日本語で行うこと
3. **AGENT.mdの参照**: 問題が発生した場合は、まず`web/AGENT.md`を確認すること
4. **デプロイ前の確認**: デプロイ前に`web/AGENT.md`のチェックリストを確認すること

## ファイル編集時の注意

- `web/src/lib/prompts/eduShift.ts` - システムインストラクション（重要なOCRルール、採点基準を含む）
- `web/src/lib/core/grader.ts` - 採点ロジック（OCR誤読検出、常体・敬体チェックなど）
- `web/src/app/api/grade/route.ts` - APIルート（PDF変換、ファイル処理）

これらのファイルを編集する際は、既存の仕様を尊重し、破壊的変更を避けてください。

