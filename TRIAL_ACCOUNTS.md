# ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±

## ğŸ“‹ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ï¼ˆ3ã‚»ãƒƒãƒˆï¼‰

### ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ1
- **IDï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰**: `trial1@example.com`
- **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: ï¼ˆç®¡ç†è€…ãŒè¨­å®š - å¤§æ–‡å­—ãƒ»å°æ–‡å­—ãƒ»æ•°å­—ãƒ»è¨˜å·ã‚’å«ã‚€8æ–‡å­—ä»¥ä¸Šï¼‰
- **ãƒˆãƒ©ã‚¤ã‚¢ãƒ«æœŸé–“**: 5æ—¥é–“
- **åˆ©ç”¨å›æ•°ä¸Šé™**: 15å›

### ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ2
- **IDï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰**: `trial2@example.com`
- **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: ï¼ˆç®¡ç†è€…ãŒè¨­å®š - å¤§æ–‡å­—ãƒ»å°æ–‡å­—ãƒ»æ•°å­—ãƒ»è¨˜å·ã‚’å«ã‚€8æ–‡å­—ä»¥ä¸Šï¼‰
- **ãƒˆãƒ©ã‚¤ã‚¢ãƒ«æœŸé–“**: 5æ—¥é–“
- **åˆ©ç”¨å›æ•°ä¸Šé™**: 15å›

### ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ3
- **IDï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰**: `trial3@example.com`
- **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: ï¼ˆç®¡ç†è€…ãŒè¨­å®š - å¤§æ–‡å­—ãƒ»å°æ–‡å­—ãƒ»æ•°å­—ãƒ»è¨˜å·ã‚’å«ã‚€8æ–‡å­—ä»¥ä¸Šï¼‰
- **ãƒˆãƒ©ã‚¤ã‚¢ãƒ«æœŸé–“**: 5æ—¥é–“
- **åˆ©ç”¨å›æ•°ä¸Šé™**: 15å›

---

## ğŸš€ ä½œæˆæ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ

1. **Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹**
   - https://app.supabase.com/ ã«ãƒ­ã‚°ã‚¤ãƒ³
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ

2. **å„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ**
   - å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œ**Authentication**ã€â†’ã€Œ**Users**ã€ã‚’é¸æŠ
   - ã€Œ**Add user**ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ã€Œ**Create new user**ã€ã‚’é¸æŠ
   - ä»¥ä¸‹ã®æƒ…å ±ã‚’å…¥åŠ›ï¼š
     - **Email**: `trial1@example.com`
     - **Password**: ï¼ˆç®¡ç†è€…ãŒæ±ºã‚ãŸå¼·åŠ›ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼‰
     - **Auto Confirm User**: âœ… **ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã‚‹**ï¼ˆé‡è¦ï¼šãƒ¡ãƒ¼ãƒ«ç¢ºèªã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼‰
   - ã€Œ**Create user**ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - åŒæ§˜ã«`trial2@example.com`ã¨`trial3@example.com`ã‚‚ä½œæˆ

### ã‚¹ãƒ†ãƒƒãƒ—2: SQLã§ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­å®š

1. **SQL Editorã‚’é–‹ã**
   - å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œ**SQL Editor**ã€ã‚’é¸æŠ
   - ã€Œ**New query**ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

2. **SQLã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ**
   - `scripts/setup_trial_accounts.sql`ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆ
   - ã¾ãŸã¯ã€ä»¥ä¸‹ã®SQLã‚’å®Ÿè¡Œï¼š

```sql
-- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ1ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­å®š
DO $$
DECLARE
    v_user_id UUID;
BEGIN
    SELECT id INTO v_user_id 
    FROM auth.users 
    WHERE email = 'trial1@example.com' 
    LIMIT 1;
    
    IF v_user_id IS NOT NULL THEN
        INSERT INTO user_profiles (id, email, display_name, free_trial_started_at, free_trial_usage_count, custom_trial_days, custom_trial_usage_limit, updated_at)
        VALUES (v_user_id, 'trial1@example.com', 'ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼1', NOW(), 0, 5, 15, NOW())
        ON CONFLICT (id) DO UPDATE SET
            free_trial_started_at = NOW(),
            free_trial_usage_count = 0,
            custom_trial_days = 5,
            custom_trial_usage_limit = 15,
            updated_at = NOW();
    END IF;
END $$;

-- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ2ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­å®š
DO $$
DECLARE
    v_user_id UUID;
BEGIN
    SELECT id INTO v_user_id 
    FROM auth.users 
    WHERE email = 'trial2@example.com' 
    LIMIT 1;
    
    IF v_user_id IS NOT NULL THEN
        INSERT INTO user_profiles (id, email, display_name, free_trial_started_at, free_trial_usage_count, custom_trial_days, custom_trial_usage_limit, updated_at)
        VALUES (v_user_id, 'trial2@example.com', 'ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼2', NOW(), 0, 5, 15, NOW())
        ON CONFLICT (id) DO UPDATE SET
            free_trial_started_at = NOW(),
            free_trial_usage_count = 0,
            custom_trial_days = 5,
            custom_trial_usage_limit = 15,
            updated_at = NOW();
    END IF;
END $$;

-- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ3ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­å®š
DO $$
DECLARE
    v_user_id UUID;
BEGIN
    SELECT id INTO v_user_id 
    FROM auth.users 
    WHERE email = 'trial3@example.com' 
    LIMIT 1;
    
    IF v_user_id IS NOT NULL THEN
        INSERT INTO user_profiles (id, email, display_name, free_trial_started_at, free_trial_usage_count, custom_trial_days, custom_trial_usage_limit, updated_at)
        VALUES (v_user_id, 'trial3@example.com', 'ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼3', NOW(), 0, 5, 15, NOW())
        ON CONFLICT (id) DO UPDATE SET
            free_trial_started_at = NOW(),
            free_trial_usage_count = 0,
            custom_trial_days = 5,
            custom_trial_usage_limit = 15,
            updated_at = NOW();
    END IF;
END $$;
```

3. **ã€ŒRunã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯**

### ã‚¹ãƒ†ãƒƒãƒ—3: ç¢ºèª

ä»¥ä¸‹ã®SQLã§ä½œæˆã•ã‚ŒãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç¢ºèªã§ãã¾ã™ï¼š

```sql
SELECT 
    u.email as "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
    up.free_trial_started_at as "ãƒˆãƒ©ã‚¤ã‚¢ãƒ«é–‹å§‹æ—¥",
    up.free_trial_usage_count as "ä½¿ç”¨å›æ•°",
    up.custom_trial_days as "ãƒˆãƒ©ã‚¤ã‚¢ãƒ«æœŸé–“(æ—¥)",
    up.custom_trial_usage_limit as "åˆ©ç”¨å›æ•°ä¸Šé™",
    (up.free_trial_started_at + (COALESCE(up.custom_trial_days, 7) || ' days')::INTERVAL) as "ãƒˆãƒ©ã‚¤ã‚¢ãƒ«çµ‚äº†æ—¥"
FROM auth.users u
LEFT JOIN user_profiles up ON u.id = up.id
WHERE u.email IN ('trial1@example.com', 'trial2@example.com', 'trial3@example.com')
ORDER BY u.email;
```

---

## âœ… å®Œäº†ç¢ºèª

ä»¥ä¸‹ã®æ¡ä»¶ãŒæº€ãŸã•ã‚Œã¦ã„ã‚Œã°å®Œäº†ã§ã™ï¼š

- [ ] 3ã¤ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ`auth.users`ãƒ†ãƒ¼ãƒ–ãƒ«ã«å­˜åœ¨ã™ã‚‹
- [ ] å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®`user_profiles`ã«ä»¥ä¸‹ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ï¼š
  - `custom_trial_days = 5`
  - `custom_trial_usage_limit = 15`
  - `free_trial_started_at = ç¾åœ¨ã®æ—¥æ™‚`
  - `free_trial_usage_count = 0`

---

## ğŸ“ æ³¨æ„äº‹é …

- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯å¼·åŠ›ãªã‚‚ã®ï¼ˆå¤§æ–‡å­—ãƒ»å°æ–‡å­—ãƒ»æ•°å­—ãƒ»è¨˜å·ã‚’å«ã‚€ï¼‰ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„
- ã€ŒAuto Confirm Userã€ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œãªã„ã¨ã€ãƒ¡ãƒ¼ãƒ«ç¢ºèªãŒå¿…è¦ã«ãªã‚Šã¾ã™
- ãƒˆãƒ©ã‚¤ã‚¢ãƒ«æœŸé–“ã¯ä½œæˆæ—¥æ™‚ã‹ã‚‰5æ—¥é–“ã§ã™
- åˆ©ç”¨å›æ•°ã¯15å›ã¾ã§ã§ã™











