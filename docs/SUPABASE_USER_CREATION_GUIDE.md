# Supabaseダッシュボードでのユーザー作成ガイド

## 📋 事前準備

1. **Supabaseアカウントにログイン**
   - https://app.supabase.com/ にアクセス
   - ログイン（GitHubアカウントなどで）

2. **プロジェクトを選択**
   - ダッシュボードで対象プロジェクトを選択
   - プロジェクトURL: `https://kwvakmokxxtgguiyognn.supabase.co`

---

## 🚀 ステップバイステップ手順

### ステップ1: Authentication画面にアクセス

1. **左サイドバーのメニューを確認**
   - 画面左側にメニューが表示されています

2. **「Authentication」をクリック**
   - 左メニューから「**Authentication**」（認証）を選択
   - サブメニューが展開されます

3. **「Users」をクリック**
   - 「Authentication」の下にある「**Users**」をクリック
   - ユーザー一覧画面が表示されます

---

### ステップ2: 新しいユーザーを作成

1. **「Add user」ボタンを探す**
   - 画面右上または上部に「**Add user**」ボタンがあります
   - クリックします

2. **「Create new user」を選択**
   - モーダルまたはドロップダウンメニューが表示されます
   - 「**Create new user**」を選択します

---

### ステップ3: ユーザー情報を入力

表示されるフォームに以下の情報を入力します：

#### アカウント1の場合：

1. **Email（メールアドレス）**
   - 入力欄に以下を入力：
   ```
   trial1@example.com
   ```

2. **Password（パスワード）**
   - 入力欄に以下を入力：
   ```
   Trial1@2024
   ```
   - パスワードは表示/非表示を切り替えられます（目のアイコン）

3. **Auto Confirm User（自動確認）**
   - ✅ **必ずチェックを入れる**
   - このチェックを入れないと、メール確認が必要になります
   - トライアルアカウントではメール確認をスキップする必要があります

4. **Send magic link（オプション）**
   - チェック不要（通常はオフのまま）

5. **User Metadata（オプション）**
   - 空欄のままでOK
   - 必要に応じて追加情報を入力可能

---

### ステップ4: ユーザーを作成

1. **「Create user」ボタンをクリック**
   - フォーム下部の「**Create user**」ボタンをクリック

2. **作成確認**
   - ユーザー一覧に新しいユーザーが表示されます
   - メールアドレス: `trial1@example.com`
   - ステータス: 「Confirmed」または「Active」と表示されるはずです

---

### ステップ5: 残り2つのアカウントも作成

同じ手順で、以下2つのアカウントも作成します：

#### アカウント2
- **Email**: `trial2@example.com`
- **Password**: `Trial2@2024`
- **Auto Confirm User**: ✅ チェック

#### アカウント3
- **Email**: `trial3@example.com`
- **Password**: `Trial3@2024`
- **Auto Confirm User**: ✅ チェック

---

## ⚠️ 重要な注意事項

### 1. 「Auto Confirm User」は必須
- ✅ **必ずチェックを入れる**
- チェックを入れないと、ユーザーはメール確認が必要になり、ログインできません
- トライアルアカウントでは即座に使用できるようにする必要があります

### 2. パスワードの強度
- 大文字・小文字・数字・記号を含む強力なパスワードを使用
- 今回のパスワード（`Trial1@2024`など）は要件を満たしています

### 3. メールアドレスの形式
- 実際のメールアドレスである必要はありません
- `@example.com`ドメインでも問題ありません
- ただし、重複はできません（既に存在する場合はエラーになります）

---

## 🔍 作成確認方法

### 方法1: ユーザー一覧で確認

1. **「Authentication」→「Users」画面で確認**
   - 作成した3つのユーザーが一覧に表示されているか確認
   - 各ユーザーの「Email」と「Created at」が表示されます

### 方法2: SQLで確認

SQL Editorで以下のSQLを実行：

```sql
SELECT 
    email,
    id,
    created_at,
    email_confirmed_at,
    confirmed_at
FROM auth.users
WHERE email IN ('trial1@example.com', 'trial2@example.com', 'trial3@example.com')
ORDER BY email;
```

**期待される結果:**
- 3行のデータが返される
- `email_confirmed_at`または`confirmed_at`がNULLでない（確認済み）

---

## 🐛 よくある問題と解決方法

### 問題1: 「Email already exists」エラー

**原因**: 既に同じメールアドレスのユーザーが存在する

**解決方法**:
1. ユーザー一覧で既存のユーザーを確認
2. 既存のユーザーを削除するか、別のメールアドレスを使用
3. 既存のユーザーを使用する場合は、次のステップ（プロファイル設定）に進む

### 問題2: ユーザーが作成されたが、ログインできない

**原因**: 「Auto Confirm User」にチェックを入れなかった

**解決方法**:
1. ユーザー一覧で該当ユーザーをクリック
2. 「Confirm email」ボタンをクリック
3. または、ユーザーを削除して再作成（今度は「Auto Confirm User」にチェック）

### 問題3: パスワードが弱すぎるエラー

**原因**: パスワードがSupabaseの要件を満たしていない

**解決方法**:
- 大文字・小文字・数字・記号を含む8文字以上のパスワードを使用
- 例: `Trial1@2024`（要件を満たしています）

---

## 📝 次のステップ

ユーザー作成が完了したら、以下の手順に進みます：

1. **SQL Editorでプロファイルを設定**
   - 左メニューから「**SQL Editor**」を選択
   - `scripts/setup_trial_accounts.sql`の内容をコピー＆ペースト
   - 「**Run**」ボタンをクリック

2. **確認**
   - プロファイルが正しく設定されたか確認
   - 詳細は`TRIAL_ACCOUNTS.md`を参照

---

## 💡 補足情報

### ユーザー作成後の自動処理

Supabaseには、ユーザー作成時に自動的に`user_profiles`テーブルにレコードを作成するトリガーが設定されています。ただし、カスタムトライアル設定（`custom_trial_days`、`custom_trial_usage_limit`）は手動で設定する必要があります。

### 一括作成（上級者向け）

複数のユーザーを一度に作成したい場合は、Supabase Admin APIを使用したスクリプト（`scripts/create_trial_accounts.js`）を使用できます。ただし、Service Role Keyが必要です。

---

## ✅ チェックリスト

ユーザー作成が完了したら、以下を確認してください：

- [ ] `trial1@example.com`が作成された
- [ ] `trial2@example.com`が作成された
- [ ] `trial3@example.com`が作成された
- [ ] 各ユーザーの「Auto Confirm User」にチェックを入れた
- [ ] ユーザー一覧で3つのユーザーが表示されている
- [ ] 各ユーザーのステータスが「Confirmed」または「Active」になっている

すべてチェックが入ったら、次のステップ（プロファイル設定）に進みます。




